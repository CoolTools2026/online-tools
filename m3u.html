<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free M3U / M3U8 Playlist Converter - Convert to TXT/CSV</title>
    <style>
        :root { --primary: #0066cc; --bg: #f4f6f8; --white: #ffffff; }
        body { font-family: 'Segoe UI', Roboto, sans-serif; background: var(--bg); margin: 0; color: #333; display: flex; flex-direction: column; min-height: 100vh;}
        
        /* 導覽列 */
        nav { background: var(--white); padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .logo { color: var(--primary); font-weight: bold; font-size: 1.2rem; text-decoration: none; }
        .nav-links { display: flex; align-items: center; gap: 15px; flex-wrap: wrap; }
        .nav-links a { text-decoration: none; color: #555; font-weight: 500; font-size: 0.9rem; white-space: nowrap; } 
        select.lang-switch { padding: 5px; border-radius: 5px; border: 1px solid #ddd; cursor: pointer; }
        
        .container { max-width: 800px; margin: 40px auto; padding: 0 20px; flex: 1; width: 100%; box-sizing: border-box; }
        .card { background: var(--white); padding: 30px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        
        textarea { width: 100%; height: 200px; padding: 10px; border: 2px solid #ddd; border-radius: 8px; font-family: monospace; box-sizing: border-box; resize: vertical; }
        .btn { background: var(--primary); color: white; border: none; padding: 12px 30px; font-size: 1rem; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 15px; font-weight: bold; }
        
        .radio-group { margin: 15px 0; display: flex; gap: 20px; justify-content: center; background: #f9f9f9; padding: 10px; border-radius: 8px;}
        #stats { text-align: center; margin-top: 10px; color: #666; font-size: 0.9rem; }
        
        .ad-slot { background: #f0f0f0; height: 100px; margin: 20px 0; display: flex; align-items: center; justify-content: center; color: #999; }
        
        /* SEO 文章區塊樣式 */
        .seo-section { margin-top: 40px; background: white; padding: 30px; border-radius: 12px; text-align: left; line-height: 1.8; color: #444; }
        .seo-section h2 { color: var(--primary); margin-top: 0; }
        .seo-content { display: none; } /* 預設隱藏所有文章，靠 JS 打開 */
        
        footer { text-align: center; padding: 20px; color: #888; margin-top: auto; }
        @media (max-width: 768px) { nav { flex-direction: column; gap: 10px; } .nav-links { justify-content: center; } }
    </style>
</head>
<body>
    <nav>
        <a href="index.html" class="logo">MyToolBox</a>
        <div class="nav-links">
            <a href="index.html" data-i18n="nav_home">Home</a>
            <select class="lang-switch" onchange="setLanguage(this.value)">
                <option value="en">English</option>
                <option value="zh-TW">繁體中文</option>
                <option value="zh-CN">简体中文</option>
                <option value="es">Español</option>
                <option value="pt">Português</option>
                <option value="fr">Français</option>
                <option value="de">Deutsch</option>
            </select>
        </div>
    </nav>

    <div class="container">
        <div class="card">
            <h1 data-i18n="title">M3U Playlist Converter</h1>
            <p data-i18n="desc">Convert your IPTV playlist to TXT or CSV (Excel) format easily.</p>
            
            <textarea id="input-content" placeholder="Paste your M3U / M3U8 content here..."></textarea>

            <div class="radio-group">
                <label><input type="radio" name="format" value="txt" checked> <span data-i18n="opt_txt">TXT (Plain Text)</span></label>
                <label><input type="radio" name="format" value="csv"> <span data-i18n="opt_csv">CSV (Excel)</span></label>
            </div>

            <button class="btn" onclick="convertM3U()" data-i18n="btn_convert">Convert Now</button>
            <div id="stats"></div>

            <p style="margin-top:20px; font-weight:bold;"><span data-i18n="result_label">Result:</span></p>
            <textarea id="output-content" readonly placeholder="..."></textarea>
            <button class="btn" style="background:#28a745; display:none;" id="download-btn" onclick="downloadFile()" data-i18n="btn_download">Download File</button>
        </div>

        <div class="ad-slot">[AdSense Space]</div>

        <div class="seo-section">
            
            <div id="seo-en" class="seo-content">
                <h2>Complete Guide: How to Convert M3U Playlists</h2>
                <p>Managing M3U8 files can be overwhelming. IPTV providers often supply playlists with thousands of channels, causing lag on TV boxes. Our <strong>Free Online M3U Converter</strong> helps you parse and edit these files.</p>
                <h3>Why Convert M3U to CSV?</h3>
                <ul>
                    <li><strong>Filter Channels:</strong> Open the CSV in Excel to sort and delete unwanted groups.</li>
                    <li><strong>Check Links:</strong> Easily verify stream URLs.</li>
                    <li><strong>Privacy:</strong> We process data 100% in your browser using JavaScript. No uploads.</li>
                </ul>
            </div>

            <div id="seo-zh-TW" class="seo-content">
                <h2>M3U / M3U8 播放列表轉換與編輯指南</h2>
                <p>管理龐大的 M3U8 檔案可能令人頭痛。IPTV 提供商通常會提供包含數千個頻道的列表，導致電視盒運作緩慢。我們的<strong>免費線上 M3U 轉換器</strong>可以幫助您解析與編輯這些檔案。</p>
                <h3>為什麼要將 M3U 轉為 CSV？</h3>
                <ul>
                    <li><strong>篩選頻道：</strong> 在 Excel 中開啟 CSV，快速排序並刪除不需要的群組。</li>
                    <li><strong>檢查連結：</strong> 輕鬆檢視串流網址是否有效。</li>
                    <li><strong>隱私安全：</strong> 我們使用 JavaScript 在您的瀏覽器中 100% 本地運算。無需上傳檔案。</li>
                </ul>
            </div>

            <div id="seo-zh-CN" class="seo-content">
                <h2>M3U / M3U8 播放列表转换与编辑指南</h2>
                <p>管理庞大的 M3U8 文件可能令人头痛。IPTV 提供商通常会提供包含数千个频道的列表，导致电视盒运行缓慢。我们的<strong>免费在线 M3U 转换器</strong>可以帮助您解析与编辑这些文件。</p>
                <h3>为什么要将 M3U 转为 CSV？</h3>
                <ul>
                    <li><strong>筛选频道：</strong> 在 Excel 中打开 CSV，快速排序并删除不需要的群组。</li>
                    <li><strong>检查链接：</strong> 轻松查看流媒体网址是否有效。</li>
                    <li><strong>隐私安全：</strong> 我们使用 JavaScript 在您的浏览器中 100% 本地运算。无需上传文件。</li>
                </ul>
            </div>

            <div id="seo-es" class="seo-content">
                <h2>Guía Completa: Cómo Convertir Listas M3U</h2>
                <p>Gestionar archivos M3U8 puede ser abrumador. Nuestro <strong>Convertidor M3U Online Gratuito</strong> le ayuda a analizar y editar estos archivos fácilmente.</p>
                <h3>¿Por qué convertir M3U a CSV?</h3>
                <ul>
                    <li><strong>Filtrar Canales:</strong> Abra el CSV en Excel para ordenar y eliminar grupos no deseados.</li>
                    <li><strong>Privacidad:</strong> Procesamos los datos 100% en su navegador. Sin subidas al servidor.</li>
                </ul>
            </div>

            <div id="seo-pt" class="seo-content">
                <h2>Guia Completo: Como Converter Listas M3U</h2>
                <p>Gerenciar arquivos M3U8 pode ser difícil. Nosso <strong>Conversor M3U Online Gratuito</strong> ajuda você a analisar e editar esses arquivos facilmente.</p>
                <h3>Por que converter M3U para CSV?</h3>
                <ul>
                    <li><strong>Filtrar Canais:</strong> Abra o CSV no Excel para classificar e excluir grupos indesejados.</li>
                    <li><strong>Privacidade:</strong> Processamos os dados 100% no seu navegador. Sem uploads.</li>
                </ul>
            </div>

            <div id="seo-fr" class="seo-content">
                <h2>Guide : Comment convertir des playlists M3U</h2>
                <p>Gérer des fichiers M3U8 peut être complexe. Notre <strong>Convertisseur M3U Gratuit</strong> vous aide à analyser et éditer ces fichiers.</p>
                <h3>Pourquoi convertir M3U en CSV ?</h3>
                <ul>
                    <li><strong>Filtrer les chaînes :</strong> Ouvrez le CSV dans Excel pour trier et supprimer les groupes indésirables.</li>
                    <li><strong>Confidentialité :</strong> Traitement 100% local dans votre navigateur.</li>
                </ul>
            </div>

            <div id="seo-de" class="seo-content">
                <h2>Anleitung: M3U-Playlists konvertieren</h2>
                <p>Das Verwalten von M3U8-Dateien kann schwierig sein. Unser <strong>Kostenloser M3U-Konverter</strong> hilft Ihnen beim Parsen und Bearbeiten.</p>
                <h3>Warum M3U in CSV konvertieren?</h3>
                <ul>
                    <li><strong>Kanäle filtern:</strong> Öffnen Sie die CSV in Excel, um unerwünschte Gruppen zu löschen.</li>
                    <li><strong>Datenschutz:</strong> Wir verarbeiten Daten zu 100% in Ihrem Browser. Kein Upload.</li>
                </ul>
            </div>

        </div>
    </div>

    <footer>
        &copy; <span id="year"></span> MyToolBox. All Rights Reserved. 
        | <a href="privacy.html" style="color:#999; text-decoration:none;">Privacy Policy</a>
    </footer>

    <script>
        const translations = {
            "en": {
                nav_home: "Home",
                title: "M3U Playlist Converter", desc: "Convert your IPTV playlist to TXT or CSV (Excel) format easily.",
                opt_txt: "TXT (Plain Text)", opt_csv: "CSV (Excel)",
                btn_convert: "Convert Now", btn_download: "Download File", result_label: "Result:"
            },
            "zh-TW": {
                nav_home: "首頁",
                title: "M3U / M3U8 列表轉換器", desc: "將 IPTV 播放列表轉換為 TXT 或 CSV (Excel) 格式。",
                opt_txt: "純文字 (TXT)", opt_csv: "表格 (CSV/Excel)",
                btn_convert: "開始轉換", btn_download: "下載檔案", result_label: "轉換結果："
            },
            "zh-CN": {
                nav_home: "首页",
                title: "M3U / M3U8 列表转换器", desc: "将 IPTV 播放列表转换为 TXT 或 CSV (Excel) 格式。",
                opt_txt: "纯文本 (TXT)", opt_csv: "表格 (CSV/Excel)",
                btn_convert: "开始转换", btn_download: "下载文件", result_label: "转换结果："
            },
            "es": {
                nav_home: "Inicio",
                title: "Convertidor de Listas M3U", desc: "Convierta su lista de reproducción IPTV a formato TXT o CSV (Excel) fácilmente.",
                opt_txt: "TXT (Texto plano)", opt_csv: "CSV (Excel)",
                btn_convert: "Convertir Ahora", btn_download: "Descargar Archivo", result_label: "Resultado:"
            },
            "pt": {
                nav_home: "Início",
                title: "Conversor de Lista M3U", desc: "Converta sua lista de reprodução IPTV para formato TXT ou CSV (Excel) facilmente.",
                opt_txt: "TXT (Texto simples)", opt_csv: "CSV (Excel)",
                btn_convert: "Converter Agora", btn_download: "Baixar Arquivo", result_label: "Resultado:"
            },
            "fr": {
                nav_home: "Accueil",
                title: "Convertisseur Playlist M3U", desc: "Convertissez facilement votre playlist IPTV au format TXT ou CSV (Excel).",
                opt_txt: "TXT (Texte brut)", opt_csv: "CSV (Excel)",
                btn_convert: "Convertir Maintenant", btn_download: "Télécharger", result_label: "Résultat :"
            },
            "de": {
                nav_home: "Startseite",
                title: "M3U Playlist Konverter", desc: "Konvertieren Sie Ihre IPTV-Playlist einfach in das TXT- oder CSV-Format (Excel).",
                opt_txt: "TXT (Reintext)", opt_csv: "CSV (Excel)",
                btn_convert: "Jetzt Konvertieren", btn_download: "Datei Herunterladen", result_label: "Ergebnis:"
            }
        };

        function setLanguage(lang) {
            // 防呆
            if (!translations[lang]) lang = 'en';
            try { localStorage.setItem('lang', lang); } catch (e) {}
            
            // 更新下拉選單
            const select = document.querySelector('.lang-switch');
            if(select) select.value = lang;
            
            // 1. 更新短文字 (介面)
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if(translations[lang][key]) el.innerText = translations[lang][key];
            });

            // 2. 更新 SEO 文章 (顯示對應語言，隱藏其他)
            // 先把所有文章隱藏
            document.querySelectorAll('.seo-content').forEach(el => {
                el.style.display = 'none';
            });
            // 再把選到的語言顯示出來
            const targetSeo = document.getElementById('seo-' + lang);
            if (targetSeo) {
                targetSeo.style.display = 'block';
            } else {
                // 如果找不到對應語言的文章，預設顯示英文
                document.getElementById('seo-en').style.display = 'block';
            }
        }
        
        // 初始化
        const savedLang = localStorage.getItem('lang') || 'en';
        document.getElementById("year").innerText = new Date().getFullYear();
        setLanguage(savedLang);

        // 功能邏輯
        function convertM3U() {
            const input = document.getElementById('input-content').value;
            const format = document.querySelector('input[name="format"]:checked').value;
            const outputArea = document.getElementById('output-content');
            const stats = document.getElementById('stats');
            const dlBtn = document.getElementById('download-btn');

            if (!input.trim()) { alert("Please input content!"); return; }

            const lines = input.split('\n');
            let result = format === 'csv' ? "Channel Name,URL\n" : "";
            let count = 0;
            let currentName = "";

            for (let i = 0; i < lines.length; i++) {
                let line = lines[i].trim();
                if (!line) continue;
                if (line.startsWith("#EXTINF:")) {
                    let comma = line.lastIndexOf(',');
                    currentName = comma !== -1 ? line.substring(comma + 1).trim() : "Untitled";
                } else if (line.startsWith("http") || line.endsWith(".m3u8") || line.endsWith(".ts") || line.startsWith("rtmp")) {
                    if (currentName === "") currentName = "Channel_" + (count + 1);
                    if (format === 'csv') {
                        let safeName = currentName.replace(/"/g, '""');
                        result += `${safeName},${line}\n`;
                    } else {
                        result += `${currentName}, ${line}\n`;
                    }
                    count++;
                    currentName = "";
                }
            }
            outputArea.value = result;
            stats.innerHTML = `✅ ${count} Channels`;
            dlBtn.style.display = 'block';
        }

        function downloadFile() {
            const content = document.getElementById('output-content').value;
            const format = document.querySelector('input[name="format"]:checked').value;
            const blob = new Blob([content], { type: "text/plain;charset=utf-8" });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = `playlist.${format}`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
</body>
</html>
