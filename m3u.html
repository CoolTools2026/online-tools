<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free M3U / M3U8 Playlist Converter - Convert to TXT/CSV</title>
    <style>
        :root { --primary: #0066cc; --bg: #f4f6f8; --white: #ffffff; }
        body { font-family: 'Segoe UI', Roboto, sans-serif; background: var(--bg); margin: 0; color: #333; display: flex; flex-direction: column; min-height: 100vh;}
        
        /* 導覽列設定 */
        nav { background: var(--white); padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .logo { color: var(--primary); font-weight: bold; font-size: 1.2rem; text-decoration: none; }
        
        /* 關鍵：讓導覽列連結跟語言選單橫向排列 */
        .nav-links { display: flex; align-items: center; gap: 15px; flex-wrap: wrap; }
        .nav-links a { text-decoration: none; color: #555; font-weight: 500; font-size: 0.9rem; white-space: nowrap; } 
        select.lang-switch { padding: 5px; border-radius: 5px; border: 1px solid #ddd; cursor: pointer; }
        
        .container { max-width: 800px; margin: 40px auto; padding: 0 20px; flex: 1; width: 100%; box-sizing: border-box; }
        .card { background: var(--white); padding: 30px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        
        textarea { width: 100%; height: 200px; padding: 10px; border: 2px solid #ddd; border-radius: 8px; font-family: monospace; box-sizing: border-box; resize: vertical; }
        textarea:focus { border-color: var(--primary); outline: none; }
        
        .btn { background: var(--primary); color: white; border: none; padding: 12px 30px; font-size: 1rem; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 15px; font-weight: bold; transition: 0.2s; }
        .btn:hover { background: #0052a3; }
        
        .radio-group { margin: 15px 0; display: flex; gap: 20px; justify-content: center; background: #f9f9f9; padding: 10px; border-radius: 8px;}
        .radio-group label { cursor: pointer; }
        
        #stats { text-align: center; margin-top: 10px; color: #666; font-size: 0.9rem; }
        
        .ad-slot { background: #f0f0f0; height: 100px; margin: 20px 0; display: flex; align-items: center; justify-content: center; color: #999; }
        .seo-content { margin-top: 40px; background: white; padding: 30px; border-radius: 12px; text-align: left; }
        footer { text-align: center; padding: 20px; color: #888; margin-top: auto; }
        
        /* 手機版適配 */
        @media (max-width: 768px) { 
            nav { flex-direction: column; gap: 10px; } 
            .nav-links { justify-content: center; } 
        }
    </style>
</head>
<body>
    <nav>
        <a href="index.html" class="logo">MyToolBox</a>
        <div class="nav-links">
            <a href="index.html" data-i18n="nav_home">Home</a>
            <select class="lang-switch" onchange="setLanguage(this.value)">
                <option value="en">English</option>
                <option value="zh-TW">繁體中文</option>
                <option value="zh-CN">简体中文</option>
                <option value="es">Español</option>
                <option value="pt">Português</option>
                <option value="fr">Français</option>
                <option value="de">Deutsch</option>
            </select>
        </div>
    </nav>

    <div class="container">
        <div class="card">
            <h1 data-i18n="title">M3U Playlist Converter</h1>
            <p data-i18n="desc">Convert your IPTV playlist to TXT or CSV (Excel) format easily.</p>
            
            <textarea id="input-content" placeholder="Paste your M3U / M3U8 content here..."></textarea>

            <div class="radio-group">
                <label><input type="radio" name="format" value="txt" checked> <span data-i18n="opt_txt">TXT (Plain Text)</span></label>
                <label><input type="radio" name="format" value="csv"> <span data-i18n="opt_csv">CSV (Excel)</span></label>
            </div>

            <button class="btn" onclick="convertM3U()" data-i18n="btn_convert">Convert Now</button>
            <div id="stats"></div>

            <p style="margin-top:20px; font-weight:bold;"><span data-i18n="result_label">Result:</span></p>
            <textarea id="output-content" readonly placeholder="..."></textarea>
            <button class="btn" style="background:#28a745; display:none;" id="download-btn" onclick="downloadFile()" data-i18n="btn_download">Download File</button>
        </div>

        <div class="ad-slot">[AdSense Space]</div>

        <div class="seo-content">
            <h2 data-i18n="seo_title">Why use our M3U Converter?</h2>
            <p data-i18n="seo_text">Managing a massive IPTV playlist can be frustrating. Our Free Online M3U Converter helps you parse and organize your playlist into a clean CSV (Excel) or TXT file. 100% Client-side processing.</p>
        </div>
    </div>

	<footer>
        &copy; <span id="year"></span> MyToolBox. All Rights Reserved. 
        | <a href="privacy.html" style="color:#999; text-decoration:none;">Privacy Policy</a>
    </footer>

    <script>
        // 這行會自動抓取當前年份 (例如 2025)，你永遠不用手動改
        document.getElementById("year").innerText = new Date().getFullYear();
    </script>

    <script>
        const translations = {
            "en": {
                nav_home: "Home",
                title: "M3U Playlist Converter", desc: "Convert your IPTV playlist to TXT or CSV (Excel) format easily.",
                opt_txt: "TXT (Plain Text)", opt_csv: "CSV (Excel)",
                btn_convert: "Convert Now", btn_download: "Download File", result_label: "Result:",
                seo_title: "Why use our M3U Converter?",
                seo_text: "Managing a massive IPTV playlist can be frustrating. Our Free Online M3U Converter helps you parse and organize your playlist into a clean CSV (Excel) or TXT file. 100% Client-side processing."
            },
            "zh-TW": {
                nav_home: "首頁",
                title: "M3U / M3U8 列表轉換器", desc: "將 IPTV 播放列表轉換為 TXT 或 CSV (Excel) 格式。",
                opt_txt: "純文字 (TXT)", opt_csv: "表格 (CSV/Excel)",
                btn_convert: "開始轉換", btn_download: "下載檔案", result_label: "轉換結果：",
                seo_title: "為什麼需要 M3U 轉換工具？",
                seo_text: "許多 IPTV 服務提供包含數千個頻道的 M3U 播放列表。本工具可以幫助您清理這些列表，將其轉換為 Excel 可編輯的 CSV 格式，方便篩選。全程在瀏覽器運算，保護隱私。"
            },
            "zh-CN": {
                nav_home: "首页",
                title: "M3U / M3U8 列表转换器", desc: "将 IPTV 播放列表转换为 TXT 或 CSV (Excel) 格式。",
                opt_txt: "纯文本 (TXT)", opt_csv: "表格 (CSV/Excel)",
                btn_convert: "开始转换", btn_download: "下载文件", result_label: "转换结果：",
                seo_title: "为什么需要 M3U 转换工具？",
                seo_text: "许多 IPTV 服务提供包含数千个频道的 M3U 播放列表。本工具可以帮助您清理这些列表，将其转换为 Excel 可编辑的 CSV 格式，方便筛选。全程在浏览器运算，保护隐私。"
            },
            "es": {
                nav_home: "Inicio",
                title: "Convertidor de Listas M3U", desc: "Convierta su lista de reproducción IPTV a formato TXT o CSV (Excel) fácilmente.",
                opt_txt: "TXT (Texto plano)", opt_csv: "CSV (Excel)",
                btn_convert: "Convertir Ahora", btn_download: "Descargar Archivo", result_label: "Resultado:",
                seo_title: "¿Por qué usar nuestro convertidor M3U?",
                seo_text: "Gestionar una lista IPTV masiva puede ser frustrante. Nuestro convertidor M3U gratuito le ayuda a organizar su lista de reproducción en un archivo limpio CSV (Excel) o TXT. Procesamiento 100% en el navegador."
            },
            "pt": {
                nav_home: "Início",
                title: "Conversor de Lista M3U", desc: "Converta sua lista de reprodução IPTV para formato TXT ou CSV (Excel) facilmente.",
                opt_txt: "TXT (Texto simples)", opt_csv: "CSV (Excel)",
                btn_convert: "Converter Agora", btn_download: "Baixar Arquivo", result_label: "Resultado:",
                seo_title: "Por que usar nosso conversor M3U?",
                seo_text: "Gerenciar uma lista IPTV massiva pode ser frustrante. Nosso Conversor M3U Online Gratuito ajuda você a organizar sua playlist em um arquivo CSV (Excel) ou TXT limpo. Processamento 100% no navegador."
            },
            "fr": {
                nav_home: "Accueil",
                title: "Convertisseur Playlist M3U", desc: "Convertissez facilement votre playlist IPTV au format TXT ou CSV (Excel).",
                opt_txt: "TXT (Texte brut)", opt_csv: "CSV (Excel)",
                btn_convert: "Convertir Maintenant", btn_download: "Télécharger", result_label: "Résultat :",
                seo_title: "Pourquoi utiliser notre convertisseur M3U ?",
                seo_text: "Gérer une playlist IPTV massive peut être frustrant. Notre convertisseur M3U gratuit vous aide à organiser votre liste de lecture dans un fichier CSV (Excel) ou TXT propre. Traitement 100% côté client."
            },
            "de": {
                nav_home: "Startseite",
                title: "M3U Playlist Konverter", desc: "Konvertieren Sie Ihre IPTV-Playlist einfach in das TXT- oder CSV-Format (Excel).",
                opt_txt: "TXT (Reintext)", opt_csv: "CSV (Excel)",
                btn_convert: "Jetzt Konvertieren", btn_download: "Datei Herunterladen", result_label: "Ergebnis:",
                seo_title: "Warum unseren M3U-Konverter nutzen?",
                seo_text: "Das Verwalten einer riesigen IPTV-Playlist kann frustrierend sein. Unser kostenloser Online-M3U-Konverter hilft Ihnen, Ihre Playlist in eine saubere CSV- (Excel) oder TXT-Datei zu organisieren. 100% Verarbeitung im Browser."
            }
        };

        function setLanguage(lang) {
            if (!translations[lang]) lang = 'en';
            try { localStorage.setItem('lang', lang); } catch (e) {}
            const select = document.querySelector('.lang-switch');
            if(select) select.value = lang;
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if(translations[lang][key]) el.innerText = translations[lang][key];
            });
            document.getElementById('input-content').placeholder = (lang === 'en' || lang === 'de' || lang === 'fr') ? "Paste M3U content here..." : "請貼上內容...";
        }
        const savedLang = localStorage.getItem('lang') || 'en';
        setLanguage(savedLang);

        function convertM3U() {
            const input = document.getElementById('input-content').value;
            const format = document.querySelector('input[name="format"]:checked').value;
            const outputArea = document.getElementById('output-content');
            const stats = document.getElementById('stats');
            const dlBtn = document.getElementById('download-btn');

            if (!input.trim()) { alert("Please input content!"); return; }

            const lines = input.split('\n');
            let result = format === 'csv' ? "Channel Name,URL\n" : "";
            let count = 0;
            let currentName = "";

            for (let i = 0; i < lines.length; i++) {
                let line = lines[i].trim();
                if (!line) continue;

                if (line.startsWith("#EXTINF:")) {
                    let comma = line.lastIndexOf(',');
                    currentName = comma !== -1 ? line.substring(comma + 1).trim() : "Untitled";
                } else if (line.startsWith("http") || line.endsWith(".m3u8") || line.endsWith(".ts") || line.startsWith("rtmp")) {
                    if (currentName === "") currentName = "Channel_" + (count + 1);
                    if (format === 'csv') {
                        let safeName = currentName.replace(/"/g, '""');
                        if (safeName.includes(',')) safeName = `"${safeName}"`;
                        result += `${safeName},${line}\n`;
                    } else {
                        result += `${currentName}, ${line}\n`;
                    }
                    count++;
                    currentName = "";
                }
            }
            outputArea.value = result;
            stats.innerHTML = `✅ ${count} Channels`;
            dlBtn.style.display = 'block';
        }

        function downloadFile() {
            const content = document.getElementById('output-content').value;
            const format = document.querySelector('input[name="format"]:checked').value;
            const blob = new Blob([content], { type: "text/plain;charset=utf-8" });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = `playlist.${format}`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
</body>
</html>